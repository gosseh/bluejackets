<!DOCTYPE html>
<html>
  <head>
    <title>Map</title>
    <link rel="stylesheet" href="style.css">
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCTujvwHxlUQq3MoQlAZJ1ps76sQSdCtI0&callback=initMap&libraries=&v=weekly"
      defer
    ></script>
    <style type="text/css">
      /* Set the size of the div element that contains the map */
      #map {
        height: 400px;
        /* The height is 400 pixels */
        width: 100%;
        /* The width is the width of the web page */
      }
    </style>
    <script>
	  let latitudeDest = 42.280;
	  let longitudeDest = -83.750
	  
	  let latitude;
	  let longitude;
	  

	  
	  function openDirMap() {
	    if (typeof(Storage) !== "undefined") {
		  if (localStorage.latitude && localStorage.longitude) {
	        latitude = localStorage.latitude;
		    longitude = localStorage.longitude;
		  } else {
		    alert("You did not enter your location")
		    // go to location page
			return false;
		  }
	    } else {
		  alert("Cannot retrieve location");
		  // return to homepage
		  return false;
	    }
		
		let url = "https://www.google.com/maps/dir/?api=1";
		let origin = "&origin=" + latitude + "," + longitude;
		let destination = "&destination=" + latitudeDest + "," + longitudeDest;
		let travelmode = "&travelmode=transit";
		let newUrl = new URL(url + origin + destination + travelmode);

		var win = window.open(newUrl, '_blank');
		win.focus();
		e.preventDefault();
		return true;
	  }
	  
      // Initialize and add the map
      function initMap() {
        // The location of Uluru
        const uluru = { lat: latitudeDest, lng: longitudeDest };
        // The map, centered at Uluru
        const map = new google.maps.Map(document.getElementById("map"), {
          zoom: 14,
          center: uluru,
        });
        // The marker, positioned at Uluru
        const marker = new google.maps.Marker({
          position: uluru,
          map: map,
        });
      }
    </script>
  </head>
  <body>
    <div class="navbar">
      <div class="header-title"> Bluejackets</div>
      <div class="header-description"> Find teammates for physical activities </div>
      <button id="filter"> 
          Filter 
          <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-compact-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M1.553 6.776a.5.5 0 0 1 .67-.223L8 9.44l5.776-2.888a.5.5 0 1 1 .448.894l-6 3a.5.5 0 0 1-.448 0l-6-3a.5.5 0 0 1-.223-.67z"/>
            </svg>
      </button>
      <div id="weather"> Weather </div>
      <img src="images/cold.png" alt="weather-icon" id="weather-icon">
  </div>
    <h3>Activity location</h3>
    <!--The div element for the map -->
    <div id="map"></div>
	<form name="form">
		<input 
			type="submit" 
			value="Get directions" 
			onClick="return openDirMap();"
		/>
	</form>
  </body>
</html>
